(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49c11688"],{"002c":function(e,t,c){"use strict";c("8355")},"0fb6":function(e,t,c){},"498a":function(e,t,c){"use strict";var s=c("23e7"),a=c("58a8").trim,n=c("c8d2");s({target:"String",proto:!0,forced:n("trim")},{trim:function(){return a(this)}})},"4c88":function(e,t,c){"use strict";c("663b")},"4e90":function(e,t,c){"use strict";c("5d94")},"5d94":function(e,t,c){},"663b":function(e,t,c){},"6e08":function(e,t,c){"use strict";c("0fb6")},7069:function(e,t,c){"use strict";c("eefe")},8355:function(e,t,c){},a313:function(e,t,c){},a7d5:function(e,t,c){"use strict";c("b0c0");var s=c("7a23"),a={class:"user-list"},n={class:"user-list__container"},r={class:"user-list__header"},i={key:0,class:"user-list__title"},o={key:1,class:"user-list__title"},b={class:"user-list__body"};function u(e,t,c,u,l,h){var j=Object(s["A"])("ChatUserCard"),O=Object(s["A"])("ChatUserCardPrivate");return Object(s["t"])(),Object(s["g"])("section",a,[Object(s["h"])("div",n,[Object(s["h"])("div",r,["ChatPublic"==e.$route.name?(Object(s["t"])(),Object(s["g"])("p",i," 線上使用者 "+Object(s["D"])(c.users.length),1)):(Object(s["t"])(),Object(s["g"])("p",o,"私人訊息"))]),Object(s["h"])("div",b,["ChatPublic"==e.$route.name?(Object(s["t"])(),Object(s["e"])(j,{key:0,users:c.users},null,8,["users"])):Object(s["f"])("",!0),"ChatPrivate"==e.$route.name?(Object(s["t"])(),Object(s["e"])(O,{key:1,users:c.users},null,8,["users"])):Object(s["f"])("",!0)])])])}var l={class:"relation"},h={class:"relation__header"},j={class:"relation__avatar"},O=["src"],d={class:"relation__body"},m={class:"relation__box"},_={class:"relation__name"},v={class:"relation__account"};function g(e,t,c,a,n,r){return Object(s["t"])(),Object(s["g"])("section",l,[(Object(s["t"])(!0),Object(s["g"])(s["a"],null,Object(s["z"])(c.users,(function(e){return Object(s["t"])(),Object(s["g"])("div",{key:e.id,class:"relation__wrapper"},[Object(s["h"])("div",h,[Object(s["h"])("div",j,[Object(s["h"])("img",{class:"relation__img",src:e.avatar,alt:""},null,8,O)])]),Object(s["h"])("div",d,[Object(s["h"])("div",m,[Object(s["h"])("div",_,Object(s["D"])(e.name),1),Object(s["h"])("div",v,"@"+Object(s["D"])(e.account),1)])])])})),128))])}var f={props:{users:Array}},A=(c("4c88"),c("d959")),p=c.n(A);const C=p()(f,[["render",g],["__scopeId","data-v-467e7339"]]);var U=C,y=["onClick"],w={class:"relation__header"},P={class:"relation__avatar"},k=["src"],x={class:"relation__body"},R={class:"relation__box-top"},M={class:"relation__user-info"},D={class:"relation__name"},I={class:"relation__account"},L={class:"relation__time"},Y={class:"relation__box-bottom"};function Q(e,t,c,a,n,r){return Object(s["t"])(!0),Object(s["g"])(s["a"],null,Object(s["z"])(c.users,(function(t){return Object(s["t"])(),Object(s["g"])("section",{key:t.id,class:"relation",onClick:function(e){r.clickUser(t.id),r.clickRoom(t.roomId)}},[Object(s["h"])("div",{class:Object(s["p"])(["relation__wrapper",{"relation__wrapper--active":t.id===e.activeReceiver}])},[Object(s["h"])("div",w,[Object(s["h"])("div",P,[Object(s["h"])("img",{class:"relation__img",src:t.avatar,alt:""},null,8,k)])]),Object(s["h"])("div",x,[Object(s["h"])("div",R,[Object(s["h"])("div",M,[Object(s["h"])("div",D,Object(s["D"])(t.name),1),Object(s["h"])("div",I,"@"+Object(s["D"])(t.account),1)]),Object(s["h"])("div",L,Object(s["D"])(e.chatTime(e.latestRoomMessage(t.roomId).createdAt)),1)]),Object(s["h"])("div",Y,[Object(s["h"])("div",{class:Object(s["p"])(["relation__message",{"relation__message--unread":!e.latestRoomMessage(t.roomId).isRead}])},Object(s["D"])(e.latestRoomMessage(t.roomId).content),3)])])],2)],8,y)})),128)}var F=c("5530"),J=c("5502"),B=c("2708"),E={props:{users:Array},methods:{clickUser:function(e){this.$store.commit("chatPrivate/selectReceiver",e)},clickRoom:function(e){this.$store.commit("chatPrivate/selectChat",e),this.$socket.emit("getRoomHistory",{currentUserId:this.currentUser.id,roomId:e})}},computed:Object(F["a"])(Object(F["a"])({},Object(J["d"])({currentUser:function(e){return e.authentication.currentUser},activeReceiver:function(e){return e.chatPrivate.activeReceiver}})),Object(J["b"])({latestRoomMessage:"chatPrivate/getLatestRoomMessage"})),mixins:[B["a"]]};c("b003");const z=p()(E,[["render",Q],["__scopeId","data-v-9bbefd4a"]]);var V=z,K={components:{ChatUserCard:U,ChatUserCardPrivate:V},props:{users:Array},data:function(){return{currentURL:this.$route.name}}};c("4e90");const N=p()(K,[["render",u],["__scopeId","data-v-1a0b9468"]]);t["a"]=N},b003:function(e,t,c){"use strict";c("a313")},c8d2:function(e,t,c){var s=c("5e77").PROPER,a=c("d039"),n=c("5899"),r="​᠎";e.exports=function(e){return a((function(){return!!n[e]()||r[e]()!==r||s&&n[e].name!==e}))}},d321:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMtSURBVHgB7VnbcdNAFD1rAvxCB04H6YCkg3SAPMPzC6cCOxVAvmBIZqx0QAd2OkgHUQfwEz5i0HK0zgqtpJV2JcvWh87MxvG+dO8997ErAwMGDChAvsNcvsVP+R4L+QFj9BiirJMKyNyskO1cfEOEnmFU2iuwMr5LBIhxJ9+QmZ4xYlPg3DJ7RkWWiSLoCYRtgP6/pOWPYUfENhffcY09YmQdKbIwB4wYGLOFjJc7ttfYE6wKMGBXRiwIjGntQ7IyQY8UEVWDDNjjxOfTjhEOdSZimg24egbkglrilu1MXOUSQUcYVQ0WWIjxKR27ZGp9wAnyriVwxF2Xu6ohom6CwYLEL6zJQsjP7JyAgj4lG4KsFJ/QaQ0Z1U0wWBB4gYP/LKRzQkRkZEJGkhgJjUFdQzpipJYBJYMDC8b8HTLipIASKlsXYub/K0uxy65JFHmORUk9ibjHNdkM2yriroAnC8baj3iFv8q1xrmhCC2LYW0MaLjEgnXtV9x0VUOcGUjQhgVjH1sNacCIlwLq4Q1iwbpXlSIxJi7F0F+BLbGQ7hfQHZ8pdwxQrOorPKEiFYHurYDalz6bedgPtlu0hVT7nar4yqMi9TZTYEP9ArsE2WaxfJnvds5Ce4cod9MDNNtslv4vcwe+pkhcJ1bMFl0oecYaZ2XLvBVQ7pMNtjWDLGxXTXlFnVLwaUF4qQwzp+vc2Nb6MyAyBYwHtzbCMxmc8uMzbPXgsr4eeCnwmEKP0o51sxqg9pF0w/wZSSo/TwS/cN3LjwFp+L639VPB4xLBJb7gDy58a4qzAo/WP047PKzfheAa7gw0sL66wGwEDwqDPIa0EVzDSQFf68sps8k9BYxLTqzJjY3r22YuDTcGpFvmUYL/Zjq85/wGKbEJXC714+ROm3Y8qMNbZMzRgsvdCa5Rz0CN7yev4lOLC2PdCh0KrlH3Ystq/cqzPN9EdC24RjUDJda3FqE9vey1v53OWx/K4kFp9WyZy9vAzkDW+huExu82exZco/wnpqL1M4P9EFyjnIGi9XX/VovQNmBTIMh9X23j3N8FbFfKufqbCM6gZUo86aPwAwYMAP4BL2udn2M1ioAAAAAASUVORK5CYII="},eefe:function(e,t,c){},ffe0:function(e,t,c){"use strict";c("b0c0");var s=c("7a23"),a=c("d321"),n=c.n(a),r={class:"chatroom__container"},i={class:"chatroom__header"},o={key:0,class:"chatroom__title"},b={key:1,class:"chatroom__title"},u={class:"chatroom__body"},l={class:"chatroom__temp",ref:"temp"},h={class:"chatroom__footer"};function j(e,t,c,a,j,O){var d=Object(s["A"])("ChatMessage"),m=Object(s["A"])("ChatMessagePrivate");return Object(s["t"])(),Object(s["g"])("div",r,[Object(s["h"])("div",i,["ChatPublic"==e.$route.name?(Object(s["t"])(),Object(s["g"])("p",o," 公開聊天室 ")):(Object(s["t"])(),Object(s["g"])("p",b,"私人聊天室"))]),Object(s["h"])("div",u,["ChatPublic"==e.$route.name?(Object(s["t"])(),Object(s["e"])(d,{key:0})):Object(s["f"])("",!0),"ChatPrivate"==e.$route.name?(Object(s["t"])(),Object(s["e"])(m,{key:1})):Object(s["f"])("",!0),Object(s["h"])("div",l,null,512)]),Object(s["h"])("div",h,[Object(s["J"])(Object(s["h"])("input",{class:"chatroom__input",type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return j.content=e}),onKeyup:t[1]||(t[1]=Object(s["K"])((function(t){e.$emit("chat-submit",j.content),j.content=""}),["enter"]))},null,544),[[s["F"],j.content]]),Object(s["h"])("img",{src:n.a,class:"chatroom__icon",onClick:t[2]||(t[2]=function(t){e.$emit("chat-submit",j.content),j.content=""})})])])}var O=c("5530"),d=function(e){return Object(s["w"])("data-v-8200bb96"),e=e(),Object(s["u"])(),e},m={key:0,class:"chat-message__notice-box"},_={class:"chat-message__notice"},v={key:1,class:"chat-message__message-box"},g={class:"chat-message__side"},f=["src"],A={class:"chat-message__main"},p={class:"chat-message__content chat-message__content--other"},C={class:"chat-message__time"},U={key:2,class:"chat-message__message-box chat-message__message-box--self"},y=d((function(){return Object(s["h"])("div",{class:"chat-message__side"},null,-1)})),w={class:"chat-message__main chat-message__main--self"},P={class:"chat-message__content chat-message__content--self"},k={class:"chat-message__time"};function x(e,t,c,a,n,r){return Object(s["t"])(),Object(s["g"])("section",null,[(Object(s["t"])(!0),Object(s["g"])(s["a"],null,Object(s["z"])(e.messageList,(function(t){return Object(s["t"])(),Object(s["g"])("div",{key:t.id,class:"chat-message__container"},["notice"===t.type?(Object(s["t"])(),Object(s["g"])("div",m,[Object(s["h"])("div",_,Object(s["D"])(t.name)+" "+Object(s["D"])(t.content),1)])):Object(s["f"])("",!0),t.type||t.userId===e.currentUser.id?Object(s["f"])("",!0):(Object(s["t"])(),Object(s["g"])("div",v,[Object(s["h"])("div",g,[Object(s["h"])("img",{class:"chat-message__avatar",src:t.avatar},null,8,f)]),Object(s["h"])("div",A,[Object(s["h"])("div",p,Object(s["D"])(t.content),1),Object(s["h"])("div",C,Object(s["D"])(e.chatTime(t.createdAt)),1)])])),t.type||t.userId!==e.currentUser.id?Object(s["f"])("",!0):(Object(s["t"])(),Object(s["g"])("div",U,[y,Object(s["h"])("div",w,[Object(s["h"])("div",P,Object(s["D"])(t.content),1),Object(s["h"])("div",k,Object(s["D"])(e.chatTime(t.createdAt)),1)])]))])})),128))])}var R=c("5502"),M=c("2708"),D={computed:Object(O["a"])({},Object(R["d"])({currentUser:function(e){return e.authentication.currentUser},messageList:function(e){return e.chat.messageList}})),mixins:[M["a"]]},I=(c("7069"),c("d959")),L=c.n(I);const Y=L()(D,[["render",x],["__scopeId","data-v-8200bb96"]]);var Q=Y,F=function(e){return Object(s["w"])("data-v-37ea3ff3"),e=e(),Object(s["u"])(),e},J={key:0,class:"chat-message__alert"},B={key:1,class:"chat-message__alert"},E={key:2},z={key:0,class:"chat-message__message-box"},V={class:"chat-message__side"},K=["src"],N={class:"chat-message__main"},T={class:"chat-message__content chat-message__content--other"},X={class:"chat-message__time"},q={key:1,class:"chat-message__message-box chat-message__message-box--self"},W=F((function(){return Object(s["h"])("div",{class:"chat-message__side"},null,-1)})),G={class:"chat-message__main chat-message__main--self"},S={class:"chat-message__content chat-message__content--self"},Z={class:"chat-message__time"};function $(e,t,c,a,n,r){return Object(s["t"])(),Object(s["g"])("section",null,[e.tempUser||e.activeChat?Object(s["f"])("",!0):(Object(s["t"])(),Object(s["g"])("div",J," 點選聊天室或從朋友頁面點信封開啟新的對話吧! ")),e.tempUser&&!e.activeChat?(Object(s["t"])(),Object(s["g"])("div",B," 輸入訊息建立與"+Object(s["D"])(e.tempUser)+"的聊天室吧! ",1)):Object(s["f"])("",!0),e.activeChat?(Object(s["t"])(),Object(s["g"])("section",E,[(Object(s["t"])(!0),Object(s["g"])(s["a"],null,Object(s["z"])(e.messages,(function(t){return Object(s["t"])(),Object(s["g"])("div",{key:t.id,class:"chat-message__container"},[t.userId!==e.currentUser.id?(Object(s["t"])(),Object(s["g"])("div",z,[Object(s["h"])("div",V,[Object(s["h"])("img",{class:"chat-message__avatar",src:e.sender.avatar},null,8,K)]),Object(s["h"])("div",N,[Object(s["h"])("div",T,Object(s["D"])(t.content),1),Object(s["h"])("div",X,Object(s["D"])(e.chatTime(t.createdAt)),1)])])):Object(s["f"])("",!0),t.userId===e.currentUser.id?(Object(s["t"])(),Object(s["g"])("div",q,[W,Object(s["h"])("div",G,[Object(s["h"])("div",S,Object(s["D"])(t.content),1),Object(s["h"])("div",Z,Object(s["D"])(e.chatTime(t.createdAt)),1)])])):Object(s["f"])("",!0)])})),128))])):Object(s["f"])("",!0)])}c("4de4"),c("d3b7");var H={computed:Object(O["a"])(Object(O["a"])({},Object(R["d"])({currentUser:function(e){return e.authentication.currentUser},messageList:function(e){return e.chatPrivate.messageList},activeReceiver:function(e){return e.chatPrivate.activeReceiver},activeChat:function(e){return e.chatPrivate.activeChat},tempUser:function(e){return e.chatPrivate.tempUser}})),Object(R["b"])({messages:"chatPrivate/getRoomMessage",sender:"chatPrivate/getRoomUser",getUserList:"chatPrivate/getUserList"})),methods:{handleActiveChat:function(){var e=this,t=this.getUserList.filter((function(t){return t.id===e.activeReceiver})),c=t.length?t[0].roomId:null;this.$store.commit("chatPrivate/selectChat",c)}},mounted:function(){this.$nextTick((function(){this.handleActiveChat()}))},mixins:[M["a"]]};c("6e08");const ee=L()(H,[["render",$],["__scopeId","data-v-37ea3ff3"]]);var te=ee,ce={components:{ChatMessage:Q,ChatMessagePrivate:te},data:function(){return{content:""}},computed:Object(O["a"])(Object(O["a"])({},Object(R["d"])({currentUser:function(e){return e.authentication.currentUser},activeChat:function(e){return e.chatPrivate.activeChat}})),Object(R["b"])({getReceiverUser:"chatPrivate/getReceiverUser"})),methods:{scrollToggle:function(e){var t=this.$refs.temp;e?t.scrollIntoView({behavior:"smooth"}):t.scrollIntoView()}},mixins:[M["a"]]};c("002c");const se=L()(ce,[["render",j],["__scopeId","data-v-16bc7008"]]);t["a"]=se}}]);
//# sourceMappingURL=chunk-49c11688.a765eccf.js.map